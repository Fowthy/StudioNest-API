version: "3.8"

services:
  gateway:
    image: gateway
    container_name: gateway
    build: ./src/main/gateway
    ports:
      - "8080:8080"
    networks:
      - studionest

  auth:
    image: auth
    container_name: auth
    build: 
      context: ./src/main
      dockerfile: ./auth/Dockerfile
    ports:
      - "8491:8491"
    env_file:
      - ./src/main/auth/app/.env
    networks:
      - studionest

  # admin:
  #   image: admin
  #   container_name: admin
  #   build: 
  #     context: ./src/main
  #     dockerfile: ./admin/Dockerfile
  #   ports:
  #     - "8825:8825"
  #   env_file:
  #     - ./src/main/admin/app/.env
  #   networks:
  #     default:
  #       aliases:
  #         - admin
  roomman:
    image: roomman
    container_name: roomman
    build: 
      context: ./src/main
      dockerfile: ./roomman/Dockerfile
    ports:
      - "8812:8812"
    env_file:
      - ./src/main/roomman/app/.env
    networks:
      - studionest

  booking:
    image: booking
    container_name: booking
    build: 
      context: ./src/main
      dockerfile: ./booking/Dockerfile
    ports:
      - "8813:8813"
    env_file:
      - ./src/main/booking/app/.env
    networks:
      - studionest

  # webadmin:
  #   image: webadmin
  #   container_name: webadmin
  #   build: ../web/admin
  #   ports:
  #     - "3333:3333"
  #   networks:
  #     - studionest


  # chat:
  #   image: chat
  #   container_name: chat
  #   build: 
  #     context: ./src/main
  #     dockerfile: ./chat/Dockerfile
  #   ports:
  #     - "8823:8823"
  #   networks:
  #     default:
  #       aliases:
  #         - chat
  user:
    image: user
    container_name: user
    build: 
      context: ./src/main
      dockerfile: ./user/Dockerfile
    env_file:
      - ./src/main/user/app/.env
    ports:
      - "8815:8815"
    networks:
      - studionest

  payment:
    image: payment
    container_name: payment
    build: 
      context: ./src/main
      dockerfile: ./payment/Dockerfile
    env_file:
      - ./src/main/payment/app/.env
    ports:
      - "8822:8822"
    networks:
      - studionest

  contentlib:
    image: contentlib
    container_name: contentlib
    build: 
      context: ./src/main
      dockerfile: ./contentlib/Dockerfile
    ports:
      - "8821:8821"
    env_file:
      - ./src/main/contentlib/app/.env
    networks:
      - studionest

#   mongodb:
#     image: mongo:latest
#     container_name: mongodb
#     environment:
#       MONGO_INITDB_ROOT_USERNAME: root
#       MONGO_INITDB_ROOT_PASSWORD: root
#     ports:
#       - 27017:27017
#     volumes:
#       - ./db/mongo-volume:/data/db
#   mongo-express:
#     image: mongo-express
#     container_name: mexpress
#     environment:
#       - ME_CONFIG_MONGODB_ADMINUSERNAME=root
#       - ME_CONFIG_MONGODB_ADMINPASSWORD=root
#       - ME_CONFIG_MONGODB_URL=mongodb://root:root@mongodb:27017/?authSource=admin
#       - ME_CONFIG_BASICAUTH_USERNAME=mexpress
#       - ME_CONFIG_BASICAUTH_PASSWORD=mexpress
#     links:
#       - mongodb
#     restart: unless-stopped
#     ports:
#       - "8081:8081"
# volumes:
#   mongodb_data_container:

networks:
  studionest: